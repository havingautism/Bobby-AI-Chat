# Bobby - 现代化AI聊天应用

一个基于 **React + Tauri** 构建的现代化AI聊天应用，支持多种AI模型，具备本地数据库存储和知识库功能。

## 🚀 技术栈

### 前端技术
- **React 18.2** - 现代化UI框架
- **Tauri 2.x** - 跨平台桌面应用框架
- **TypeScript** - 类型安全的JavaScript
- **Tailwind CSS** - 实用优先的CSS框架
- **React Markdown** - Markdown渲染支持
- **React Syntax Highlighter** - 代码高亮

### 后端技术
- **Tauri Core** - 跨平台原生功能
- **SQLite + sqlite-vec** - 向量数据库
- **Rust** - 高性能系统编程语言
- **sqlx** - 异步数据库操作
- **tokio** - 异步运行时

### AI服务集成
- **硅基流动API** - 对话模型和嵌入模型
- **OpenAI兼容API** - 通用AI模型支持
- **多嵌入模型** - BAAI/bge-m3系列等

## ✨ 功能特性

### 🎯 核心功能
- 🖥️ **跨平台支持** - PC、Web、移动端完美适配
- 💾 **本地存储** - SQLite数据库存储，数据安全可控
- 🔄 **多对话管理** - 创建、切换、删除对话
- 📝 **Markdown支持** - 代码高亮、表格、列表等
- 🌊 **流式输出** - 实时显示AI回复内容
- 🔗 **API集成** - 硅基流动API，支持多种AI模型

### 🔧 高级功能
- 📚 **智能知识库** - 文档上传、语义搜索、向量索引
- 🔍 **智能搜索** - 历史对话全文搜索
- 🎭 **多角色系统** - 程序员、教师、创意助手等角色
- 💭 **推理过程显示** - 展示AI思考链
- 🕒 **对话时间轴** - 快速预览和跳转
- ⚙️ **可视化配置** - API配置和参数调节
- 🌓 **主题系统** - 明暗模式切换
- 🌍 **多语言支持** - 中英文界面

## 界面展示

### PC端界面
![Bobby AI聊天应用 - PC端](./src/imgs/ui_snapshot_pc.jpeg)

### 移动端界面
![Bobby AI聊天应用 - 移动端](./src/imgs/ui_snapshot_mobile.jpeg)

## 快速开始

### 1. 安装依赖

```bash
pnpm install
```

### 2. 配置API

首次使用时需要配置API：

1. 启动应用后，点击右上角的设置按钮
2. 系统默认配置硅基流动API服务
3. 输入API密钥
4. 选择合适的AI模型
5. 点击"测试连接"验证配置
6. 保存设置开始使用

### 3. 知识库功能配置（可选）

知识库功能现在完全使用远程硅基流动API，无需下载本地模型：

#### 功能特点
- **零配置**: 无需下载任何本地模型文件
- **云端处理**: 所有嵌入向量生成通过硅基流动API完成
- **多语言支持**: 自动检测语言并选择合适的嵌入模型
- **高性能**: 依赖云端GPU加速，处理速度快

#### 支持的嵌入模型
- **BAAI/bge-m3**: 默认多语言模型，支持中英文混合内容
- **BAAI/bge-large-zh-v1.5**: 中文专用模型
- **BAAI/bge-large-en-v1.5**: 英文专用模型
- **自动选择**: 系统根据文本内容自动选择最适合的模型

### 4. 启动应用

```bash
pnpm start
```

应用将在 http://localhost:3000 启动。

## API配置说明

### 硅基流动API (默认)

项目使用硅基流动API服务，提供对话模型和嵌入模型：

#### 支持的模型类型
- **对话模型**:
  - 最新模型 - DeepSeek-V3.1、Step-3等
  - 通义千问3系列 - Qwen3系列模型
  - 推理模型 - DeepSeek-R1等
  - 对话模型 - 各种对话优化模型
  - 通义千问2.5系列 - Qwen2.5系列模型

- **嵌入模型** (用于知识库功能):
  - BAAI/bge-m3 - 默认多语言模型
  - BAAI/bge-large-zh-v1.5 - 中文专用模型
  - BAAI/bge-large-en-v1.5 - 英文专用模型

#### 配置示例
```javascript
{
  baseURL: 'https://api.siliconflow.cn/v1/chat/completions',
  apiKey: 'YOUR_SILICONFLOW_API_KEY',
  model: 'deepseek-ai/DeepSeek-V3.1',
  temperature: 0.7,
  maxTokens: 2000
}
```

### 推荐模型
- DeepSeek-V3.1 - 最新对话模型
- DeepSeek-R1 - 高级推理模型
- Qwen3系列 - 编程专用模型
- Pro版本 - 性能更强

## 🏗️ 项目架构

### 目录结构

```
src/
├── components/              # React组件
│   ├── ChatInterface.js     # 主聊天界面
│   ├── Sidebar.js           # 侧边栏
│   ├── MessageList.js       # 消息列表
│   ├── MessageInput.js      # 消息输入框
│   ├── Settings.js          # 设置面板
│   ├── WelcomeScreen.js     # 欢迎界面
│   ├── AboutModal.js        # 关于弹窗
│   ├── LanguageToggle.js    # 语言切换
│   └── TimelineSidebar.js   # 对话时间轴
├── utils/                   # 工具函数
│   ├── api.js               # API调用封装
│   ├── storageAdapter.js    # 存储适配器
│   ├── sqliteStorage.js     # SQLite存储
│   ├── knowledgeBaseManager.js # 知识库管理
│   ├── language.js          # 多语言支持
│   ├── roles.js             # 角色配置
│   ├── theme.js             # 主题管理
│   └── tauriDetector.js     # Tauri环境检测
├── styles/                  # 样式文件
│   ├── theme.css            # 主题样式
│   └── Settings.css         # 设置面板样式
├── App.js                   # 主应用组件
└── index.js                 # 应用入口

src-tauri/
├── src/
│   ├── lib.rs              # Tauri命令注册
│   ├── main.rs             # 应用入口
│   ├── database.rs         # 数据库操作
│   ├── types.rs            # 数据类型定义
│   ├── knowledge_service.rs # 知识库服务
│   ├── vector_service.rs   # 向量服务
│   ├── embedding_service.rs # 嵌入服务
│   └── document_processor.rs # 文档处理
├── Cargo.toml              # Rust依赖配置
└── tauri.conf.toml         # Tauri配置
```

## 使用指南

### 基本操作
- 新建对话: 点击"新建聊天"按钮
- 发送消息: 输入内容后按Enter或点击发送按钮
- 切换对话: 点击侧边栏中的对话项
- 删除对话: 悬停对话项，点击删除按钮
- 复制消息: 点击消息下方的复制按钮

### 知识库功能
知识库系统支持文档上传和语义搜索，让AI能够基于你的文档内容回答问题。

#### 支持的文档格式
- **PDF文档**: 自动解析PDF内容
- **Word文档**: 支持.docx格式
- **Excel表格**: 支持.xlsx、.xls、.csv格式
- **文本文件**: 支持.txt格式
- **手动输入**: 直接输入文本内容

#### 使用步骤
1. **配置API**: 确保已配置硅基流动API密钥
2. **上传文档**: 点击知识库界面的上传按钮，选择或拖拽文档
3. **等待处理**: 系统会自动解析文档并通过远程API生成向量索引
4. **开始搜索**: 在聊天中提问，AI会基于知识库内容回答

#### 智能模型选择
- **自动语言检测**: 系统自动检测文档语言
- **多语言支持**: 支持中英文混合文档处理
- **云端优化**: 利用硅基流动的云端GPU加速处理
- **无需本地资源**: 不占用本地存储空间和计算资源

### 高级功能

#### 🔍 智能搜索
- 在搜索框输入关键词查找历史对话
- 支持搜索对话标题和消息内容
- 匹配的关键词会高亮显示

#### 🕒 对话时间轴
- **快速预览**: 右侧时间轴显示所有用户问题
- **一键跳转**: 点击时间轴项目直接跳转到对应位置
- **智能显示**: PC端常驻显示，移动端按钮控制
- **优雅交互**: 支持点击外部关闭（移动端）
- **响应式设计**: 自动适配不同屏幕尺寸

#### 📱 侧边栏管理
- 展开状态: 显示完整对话列表和搜索功能
- 收起状态: 只显示图标，节省屏幕空间（仅PC端）
- 智能分组: 按"今天"和"之前"自动分组

#### ⚙️ 设置面板
- API配置: 可视化配置界面
- 模型选择: 丰富的模型列表，按类型分类
- 连接测试: 一键测试API连接状态
- 参数调节: 调整温度、最大令牌数等参数

#### 🎭 多角色对话
- 角色切换: 支持不同AI角色（程序员、教师、创意助手等）
- 角色筛选: 按角色类型筛选历史对话
- 角色标签: 每个对话显示对应的角色标识

#### 💭 推理过程显示
- 思考过程: 可选择性显示AI的推理过程
- 步骤展示: 清晰的思考步骤展示
- 优雅UI: 简洁的推理过程界面设计

#### 🌓 主题系统
- 明亮模式: 适合白天使用
- 暗色模式: 适合夜间使用
- 自动切换: 根据系统主题自动切换

#### 🌍 多语言支持
- 中文界面: 默认中文界面
- 英文界面: 支持英文界面切换
- 实时切换: 无需刷新页面即可切换语言

### 📱 移动端适配
- 侧边栏会自动隐藏
- 点击左上角的按钮可打开/关闭侧边栏
- 触摸友好的界面设计
- 适配各种屏幕尺寸
- 时间轴按钮控制显示
- 优化的移动端交互体验

### 💾 数据存储架构

#### Tauri环境（桌面应用）
- **SQLite + sqlite-vec** - 主数据库和向量数据库
- **本地文件存储** - 数据安全可控
- **高性能查询** - 异步数据库操作
- **向量索引** - 支持语义搜索

#### Web环境（浏览器）
- **IndexedDB** - 浏览器端数据库
- **localStorage** - 设置和缓存存储
- **自动迁移** - 支持数据从Web到桌面端迁移

#### 存储特点
- **隐私保护** - 数据完全本地存储
- **跨平台同步** - 支持数据导入导出
- **高性能** - 向量搜索和全文检索
- **可扩展** - 支持大规模数据存储

## 界面特性

### 消息显示
- 用户消息: 左对齐显示
- AI回复: 支持Markdown格式，代码高亮
- 消息操作: 复制和重新生成按钮
- 头像系统: 统一的头像样式

### 输入体验
- 自动展开: 输入框根据内容自动调整高度
- 快捷键: 支持Enter发送，Shift+Enter换行

## 自定义配置

### 修改主题颜色
编辑 `src/styles/theme.css` 文件中的CSS变量：
```css
:root {
  --accent-color: #10a37f;
  --bg-primary: #ffffff;
  --text-primary: #1a1a1a;
  /* 更多颜色变量... */
}
```

### 添加新功能
项目采用模块化设计，可以轻松添加新功能：
- 在 `components/` 目录下添加新组件
- 在 `utils/` 目录下添加工具函数
- 修改 `App.js` 集成新功能


## 注意事项

1. **API密钥安全**: 请不要将API密钥提交到公共代码仓库
2. **网络要求**: 需要稳定的网络连接访问硅基流动API
3. **API配额**: 知识库功能会消耗API配额，请留意使用量
4. **浏览器兼容性**: 建议使用现代浏览器
5. **存储限制**: localStorage有存储大小限制
6. **模型限制**: 嵌入模型和对话模型共享API配额

## 🛠️ 开发和构建

### 环境要求
- **Node.js** >= 18.0.0
- **pnpm** 包管理器
- **Rust** >= 1.77.2 (桌面应用开发)
- **Tauri CLI** (桌面应用开发)

### 安装依赖

```bash
# 安装前端依赖
pnpm install

# 安装Tauri CLI (可选，桌面应用开发)
cargo install tauri-cli
```

### 开发模式

```bash
# Web端开发
pnpm start

# 桌面应用开发
pnpm tauri dev
```

### 构建生产版本

```bash
# Web端构建
pnpm run build

# 桌面应用构建
pnpm run tauri:build

# 移动端优化构建
pnpm run build:mobile
```

### 构建产物
- **Web端**: `dist/` 目录包含静态文件
- **桌面应用**: `src-tauri/target/release/bundle/` 包含各平台安装包

## 许可证

Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License

本项目采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议。

### 许可证特点
- 非商业性 - 禁止商业使用
- 署名要求 - 使用时必须注明原作者
- 强制开源 - 衍生作品必须以相同许可证发布
- 个人自由 - 可以自由进行个人使用

## 📝 更新日志

### v0.1.2 - SQLite + sqlite-vec 升级 ✨
- 🚀 **数据库升级**: 从Qdrant迁移到SQLite + sqlite-vec
- 💾 **存储优化**: 更好的性能和更小的存储占用
- 🗂️ **数据清理**: 清理了所有冗余文件和测试文件
- 📊 **统计修复**: 修复了设置页面统计数据显示问题
- 🔧 **架构优化**: 简化了后端架构，提高维护性

### v0.1.1 - Tauri桌面应用支持 🖥️
- 🖥️ **跨平台**: 新增Tauri桌面应用支持
- 💾 **本地数据库**: 使用SQLite存储，数据更安全
- 🚀 **性能提升**: 桌面端性能大幅提升
- 📦 **打包优化**: 更小的应用包大小

### v0.1.0 - 基础版本 🎉
- 🌟 **基础功能**: 完整的AI聊天功能
- 📚 **知识库**: 文档上传和语义搜索
- 🎭 **多角色**: 角色系统和推理过程显示
- 📱 **响应式**: 移动端和桌面端适配
- 🌍 **多语言**: 中英文界面支持
